

{% extends '_base.html' %}
{% load icon %}

{% block title %}{{ object.name }} Overview{% endblock title %}

{% block content %}

<h1><u>{{ object.name }} Overview</u><span class="icon"> <i class="devicon-{{ object.get_icon_string }}-plain"></i></span></h1>
<span style="float:right"><span class="popup text-primary" onclick="myFunction()">Status:<span class="popuptext" id="myPopup">
    {% if class.confirmed %}
   This course has been confirmed. You can pay now if you haven't already.
    {% else %}
    Courses will be confirmed if a minimum amount of students are met. Please sign up so we can reach it!
    {% endif %}
</span></span>
    <span class="text-muted">
       {% if class.confirmed %}
        Confirmed
    {% else %}
        Unconfirmed
    {% endif %}
    </span>
    </span>
</span>
<p class="text-muted">{{ object.start_date_string }} - {{ object.end_date_string }} &middot; {{ class.first_day }}, {{ class.second_day }}<br>
{{ class.start_time_convert }} - {{ class.end_time_convert }}</p>
<p>Instructor: <a href="{% url 'instructors' %}">{{ object.instructor }}</a></p>

<p>Level: {{ object.difficulty }}</p>
<p>Cost: ${{ object.cost_decimal }}</p>

<p>
    {{ object.description }}
</p>

<h3>Course Syllabus</h3>
<p>
    {{ object.syllabus|safe|urlize }}
</p>

{% if object.past_payment_deadline %}

    <br>
    <div class="card text-center border-danger">
        <div class="card-body">
            <div class="tab1 tabcontent">
            
            <p class="card-text text-danger">{% icon 'alert-triangle' class="text-danger" %} The course deadline has past! {% icon 'alert-triangle' class="text-danger" %}</p>
            
            </div>
            
            
          
        </div>
      </div>
      <br>
      <br>
{% elif object in request.user.classes_paid_list %}
      <br>
    <p>Go to <a href="{% url 'lesson_list' class.slug %}">course</a>.</p>
{% elif request.user in object.users.all %}
      <br>
    <p><a href="{% url 'unregister' object.slug %}">Unregister</a> {% if object.confirmed %}|  Pay by: {{ object.payment_deadline_date }} {% endif %}</p> 
    
{% else %}
    {% if object.past_registration_deadline %}
    <br>
    <div class="card text-center border-danger">
        <div class="card-body">
            <div class="tab1 tabcontent">
            
            <p class="card-text" style="color:red">{% icon 'alert-triangle' style="color:red" %} The registration deadline has past! {% icon 'alert-triangle' style="color:red" %}</p>
            
            </div>
            
            
          
        </div>
      </div>
      <br>
    {% else %}
    <br>
    <p><a href="{% url 'register' object.slug %}">Register</a> {% if object.confirmed %}| Deadline: {{ class.start_date_format }} {% endif %}</p>
    <br>
    {% endif %}
{% endif %}

<p>Back to <a href="{% url 'class_list' %}">course list</a> or <a href="{% url 'registered_classes' %}">registered courses</a>.</p>
 
<br>
{% if request.user.is_staff %}
<a href="{% url 'class_update' object.slug %}" class='btn btn-info'>Edit Info</a>
{% endif %}
{% endblock content %}
{% block javascript %}
<script>
    // When the user clicks on <div>, open the popup
    function myFunction() {
      var popup = document.getElementById("myPopup");
      popup.classList.toggle("show");
    }
    </script>
    
{% endblock javascript %}